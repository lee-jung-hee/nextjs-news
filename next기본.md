안녕하세요, 대표님. Next.js의 라우팅 기능에 대해 질문 주셨네요. 대표님의 프로젝트 구조를 바탕으로 각 기능의 역할과 사용 사례를 자세히 설명해 드리겠습니다.

이 기능들은 모두 Next.js App Router의 고급 라우팅 기법으로, 복잡한 UI 패턴을 선언적으로 쉽게 구현할 수 있도록 도와줍니다.

### 1. 병렬 라우트(Parallel Routes)와 `default.js`

**병렬 라우트 (`@` 기호)**는 하나의 레이아웃 안에서 두 개 이상의 페이지를 독립적으로 렌더링하는 기능입니다. 마치 대시보드에서 여러 위젯을 동시에 보여주는 것과 같습니다.

-   **대표님 프로젝트의 예시:** `app/(content)/archive/layout.js` 파일 안에는 `@archive`와 `@latest`라는 두 개의 "슬롯(slot)"이 정의되어 있을 것입니다. 이 레이아웃은 이 두 슬롯을 props로 받아서 원하는 위치에 렌더링합니다.

    ```javascript
    // app/(content)/archive/layout.js (예상 코드)
    export default function ArchiveLayout({ archive, latest }) {
      return (
        <div>
          <h1>News Archive</h1>
          <section id="archive-filter">{archive}</section>
          <section id="archive-latest">{latest}</section>
        </div>
      );
    }
    ```

**`default.js`의 역할:**

`default.js`는 병렬 라우트 슬롯의 **폴백(fallback) UI**입니다. Next.js가 현재 URL에 맞는 슬롯의 활성 상태를 찾지 못했을 때 렌더링할 기본 컴포넌트를 지정합니다.

-   **왜 필요한가요?** 사용자가 `/archive`로 처음 접속했다고 가정해 봅시다. Next.js는 `@latest` 슬롯에 대해서는 `default.js`를 렌더링하고, `@archive` 슬롯에 대해서도 URL과 일치하는 페이지가 없으므로 `default.js`를 렌더링해야 합니다. 만약 `default.js`가 없다면, 해당 슬롯의 콘텐츠를 무엇으로 채워야 할지 모르기 때문에 404 에러가 발생합니다. 즉, **초기 로딩 및 비일치 상태에 대한 기본 화면을 제공**하기 위해 필수적입니다.

-   **대표님 프로젝트의 예시:** `app/(content)/archive/@latest/default.js`는 사용자가 `/archive` 경로에 처음 접근했을 때 `@latest` 슬롯에 보여질 기본 뉴스 목록일 가능성이 높습니다.

### 2. `@archive/[[...filter]]` (슬롯 + 선택적 캐치올 라우트)

이것은 두 가지 개념의 조합입니다.

1.  **`@archive`**: 위에서 설명한 'archive'라는 이름의 병렬 라우트 슬롯입니다.
2.  **`[[...filter]]`**: **선택적 캐치올(Optional Catch-all) 라우트** 세그먼트입니다.
    -   `[...]`: 동적 세그먼트 (예: `[slug]`)
    -   `[...slug]`: 캐치올 세그먼트 (예: `/shop/a/b/c` -> `slug`는 `['a', 'b', 'c']`)
    -   `[[...slug]]`: **선택적** 캐치올 세그먼트. `/shop`도 일치하고, `/shop/a/b/c`도 일치합니다.

**결합된 의미:**

`@archive/[[...filter]]/page.js`는 `@archive` 슬롯 내부에서 작동하며, `/archive` URL의 하위 경로들을 모두 처리합니다.

-   사용자가 `/archive/2024`로 접속하면, `filter` 파라미터는 `['2024']`가 됩니다.
-   사용자가 `/archive/2024/sports`로 접속하면, `filter` 파라미터는 `['2024', 'sports']`가 됩니다.
-   사용자가 `/archive`로만 접속하면, 이 페이지는 렌더링되지 않고 `@archive` 슬롯의 `default.js`가 렌더링됩니다.

**주요 사용 사례:**

-   뉴스 아카이브나 이커머스 사이트에서 연도, 카테고리 등 **다중 필터링 시스템**을 구현할 때 매우 유용합니다. URL 세그먼트를 필터 조건으로 사용하여 필터링된 결과를 보여줄 수 있습니다.

### 3. `(.)image` (라우트 가로채기 - Intercepting Routes)

**라우트 가로채기**는 현재 레이아웃의 컨텍스트를 유지하면서 다른 경로의 UI를 보여주는 강력한 기능입니다. 주로 모달(Modal)을 구현할 때 사용됩니다.

-   `(.)`: 현재 세그먼트와 **동일한 레벨**의 경로를 가로챕니다.
-   `(..)`: **한 레벨 위**의 경로를 가로챕니다.

**동작 방식:**

1.  **상황:** 사용자가 `/news/some-news-slug` 페이지에 있습니다. 이 페이지에는 이미지 갤러리가 있고, 이미지 클릭 시 `/news/some-news-slug/image` 경로로 이동하는 `<Link>`가 있습니다.
2.  **가로채기:** 사용자가 이 링크를 클릭하면, Next.js는 일반적인 페이지 이동을 하는 대신, **`@modal/(.)image/page.js`** 컴포넌트를 현재 페이지 위에 **모달 형태로 렌더링**합니다. 브라우저의 URL은 `/news/some-news-slug/image`로 변경됩니다.
3.  **직접 접속:** 만약 사용자가 가로채기를 통하지 않고, 브라우저 주소창에 `/news/some-news-slug/image`를 직접 입력하거나 해당 URL에서 새로고침하면, 가로채기는 동작하지 않고 실제 경로인 `app/.../news/[slug]/image/page.js`가 전체 페이지로 렌더링됩니다.

**주요 사용 사례:**

-   피드에서 사진을 클릭했을 때 모달로 확대해서 보여주기 (인스타그램, 페이스북처럼)
-   목록 페이지에서 항목을 클릭했을 때 상세 정보를 모달로 보여주기

### 4. `(content)`와 `(marketing)` (라우트 그룹 - Route Groups)

괄호 `()`로 폴더명을 감싸면 **라우트 그룹**이 됩니다. 라우트 그룹의 가장 큰 특징은 **URL 경로에 영향을 주지 않는다**는 것입니다.

-   **왜 사용하나요?**
    1.  **코드 정리:** 관련 있는 라우트들을 논리적인 그룹으로 묶어 프로젝트 구조를 깔끔하게 유지할 수 있습니다.
    2.  **레이아웃 분리:** 특정 라우트 그룹에만 별도의 `layout.js`를 적용할 수 있습니다.

**대표님 프로젝트의 예시:**

-   `(marketing)` 그룹: `page.js`는 최상위 경로 `/`를 위한 페이지입니다. 이 그룹의 `layout.js`는 아마도 회사 소개, 서비스 홍보 등 마케팅 페이지에 공통적으로 사용될 헤더와 푸터를 가지고 있을 것입니다.
-   `(content)` 그룹: `news`, `archive` 등 실제 콘텐츠를 보여주는 페이지들이 포함됩니다. 이 그룹의 `layout.js`는 뉴스 카테고리 메뉴 등 콘텐츠 페이지에 맞는 다른 레이아웃을 가질 수 있습니다.

이렇게 그룹을 나누면, `/` (마케팅 페이지)와 `/news` (콘텐츠 페이지)가 URL 구조상으로는 같은 레벨에 있지만, 각각 완전히 다른 레이아웃을 가질 수 있게 됩니다.

**주요 사용 사례:**

-   인증이 필요한 페이지 그룹 `(auth)`과 아닌 페이지 그룹 `(public)`을 분리하여 각각 다른 레이아웃 적용
-   웹사이트의 섹션별(블로그, 대시보드, 설정 등)로 코드를 정리하고 다른 레이아웃 적용

이 기능들을 조합하면 매우 동적이고 복잡한 사용자 경험을 효율적으로 구축할 수 있습니다. 추가로 궁금한 점이 있으시면 언제든지 질문해 주세요.
